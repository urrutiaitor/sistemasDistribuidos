package UDPserverCalculatorSimple;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.InetAddress;
import java.net.Socket;

public class ServerConnWorker implements Runnable {

	ServerProxy proxy;
	Calculator calculator;
	private InetAddress address;
	private int port;
	private byte[] data;

	public ServerConnWorker(InetAddress address, int port, byte[] data) {
		this.address = address;
		this.port = port;
		this.data = data;
		proxy = new ServerProxy();
		calculator = new Calculator();
	}

	@Override
	public void run() {
		do {
			int ans = 0;
			int operation = 0;
			int[] values = new int[2];
			proxy.read(operation, values);
			
			switch (operation) {
			case 0:
				ans = calculator.gcd(values[0], values[1]);
				break;
			case 1:
				ans = calculator.factorial(values[0]);
				break;

			default:
				break;
			}
			
			proxy.write(ans);
		} while (true);
	}

}
